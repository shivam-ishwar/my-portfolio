<ng-container *ngIf="vm$ | async as vm">
  <header class="topbar">
    <div class="wrap topbar__inner">
      <div class="brand">
        <span class="brand__mark">⌁</span>
        <span class="brand__text">{{ vm.meta.name }}</span>
      </div>

      <nav class="nav">
        <a href="#skills">Skills</a>
        <a href="#resume">Resume</a>
        <a class="nav__cta" href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- HERO -->
    <section class="hero" id="top" reveal>
      <div class="hero__left">
        <p class="kicker">{{ vm.meta.title }}</p>
        <h1>{{ vm.hero.headline }}</h1>
        <p class="sub">{{ vm.hero.subheadline }}</p>

        <div class="hero__cta">
          <a class="btn btn--primary" *ngFor="let c of vm.hero.cta" [href]="c.href">{{ c.label }}</a>
        </div>

        <div class="meta">
          <span>{{ vm.meta.email }}</span>
          <span>•</span>
          <span>{{ vm.meta.phone }}</span>
          <span>•</span>
          <span>LinkedIn: {{ vm.meta.linkedin }}</span>
        </div>
      </div>

      <div class="hero__right">
        <div class="holoCard">
          <div class="holoCard__title">Focus</div>
          <div class="holoCard__body">
            <div class="pill" *ngFor="let h of vm.about.highlights">{{ h }}</div>
          </div>
        </div>
      </div>
    </section>

    <!-- TERMINAL -->
    <app-terminal [lines]="vm.skills.terminalLines"></app-terminal>

    <!-- SKILLS -->
    <section class="section" id="skills" reveal>
      <div class="section__head">
        <h2>Skills</h2>
        <p>Tools and strengths I use to ship reliable systems.</p>
      </div>

      <div class="skillGrid">
        <div class="card" *ngFor="let g of vm.skills.primary; trackBy: trackByGroup" reveal>
          <h3>{{ g.group }}</h3>
          <div class="chips">
            <span class="chip" *ngFor="let s of g.items">{{ s }}</span>
          </div>
        </div>
      </div>
    </section>

    <!-- RESUME -->
    <section class="section" id="resume" reveal>
      <div class="section__head">
        <h2>{{ vm.resume.title }}</h2>
        <p>{{ vm.resume.description }}</p>
      </div>

      <div class="grid">
        <a class="card card--link" [href]="vm.resume.href" target="_blank" rel="noreferrer" reveal>
          <div class="muted">Google Drive</div>
          <div class="contactVal">{{ vm.resume.label }}</div>
        </a>
      </div>
    </section>

    <!-- CONTACT -->
    <section class="section contact" id="contact" reveal>
      <div class="section__head">
        <h2>Contact</h2>
        <p>{{ vm.contact.pitch }}</p>
      </div>

      <div class="contactGrid">
        <a class="card card--link" *ngFor="let l of vm.contact.links" [href]="l.href" target="_blank" rel="noreferrer" reveal>
          <div class="muted">{{ l.label }}</div>
          <div class="contactVal">{{ l.value }}</div>
        </a>
      </div>

      <form class="contactForm card" (submit)="openMailDraft(message.value, vm.meta.email); message.value = ''; $event.preventDefault()" reveal>
        <label class="contactForm__label" for="message">Message</label>
        <textarea
          id="message"
          #message
          class="contactForm__message"
          name="message"
          rows="5"
          minlength="10"
          required
          placeholder="Write your project details, timeline, and what kind of help you need."
        ></textarea>
        <button class="btn btn--primary contactForm__submit" type="submit">Send Message</button>
      </form>

      <footer class="footer">
        <span>© {{ vm.meta.name }}</span>
        <a href="#top">Back to top</a>
      </footer>
    </section>
  </main>
</ng-container>
